<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Fixing audio with AppleALC | OpenCore Post-Install</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="&#39;stylesheet" href="/OpenCore-Post-Install/styles/website.css">
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/OpenCore-Post-Install/assets/css/0.styles.54998e6c.css" as="style"><link rel="preload" href="/OpenCore-Post-Install/assets/js/app.a3a75018.js" as="script"><link rel="preload" href="/OpenCore-Post-Install/assets/js/2.a6c1b66e.js" as="script"><link rel="preload" href="/OpenCore-Post-Install/assets/js/6.75f5f74d.js" as="script"><link rel="preload" href="/OpenCore-Post-Install/assets/js/28.32d25b57.js" as="script"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/10.0142a97b.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/11.9c7fa74b.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/12.43cbced4.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/13.c83fce6b.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/14.e78d09ff.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/15.ab693084.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/16.9518c95f.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/17.5002961b.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/18.c8d9d356.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/19.348f9251.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/20.b23f00fc.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/21.6b554871.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/22.7f4129e3.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/23.dbb52980.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/24.c36acc78.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/25.0868fdcc.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/26.5997a916.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/27.74ddd901.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/29.c54847b5.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/3.d6f68cc8.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/30.4f6fe97f.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/31.f6f7c083.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/32.dbcb21bd.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/33.c0489543.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/34.1ea34831.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/35.29ad4cb2.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/36.eecef22c.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/37.0a2f43dc.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/4.f66f4fd2.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/5.26e60485.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/7.0508aec3.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/8.e1c5b34e.js"><link rel="prefetch" href="/OpenCore-Post-Install/assets/js/9.fb6557c8.js">
    <link rel="stylesheet" href="/OpenCore-Post-Install/assets/css/0.styles.54998e6c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/OpenCore-Post-Install/" class="home-link router-link-active"><img src="/OpenCore-Post-Install/homepage.png" alt="OpenCore Post-Install" class="logo"> <span class="site-name can-hide">OpenCore Post-Install</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Dortania Guides" class="dropdown-title"><span class="title">Dortania Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dortania.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home Site
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/OpenCore-Desktop-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpenCore Install Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/Getting-Started-With-ACPI/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Getting Started With ACPI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/GPU-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GPU Buyers Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/Wireless-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Wireless Buyers Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/Anti-Hackintosh-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Anti Buyers Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <div class="nav-item"><a role="button" aria-label="Switch to light mode" class="nav-link"><span>Switch theme</span></a></div> <a href="https://github.com/dortania/OpenCore-Post-Install" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Dortania Guides" class="dropdown-title"><span class="title">Dortania Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dortania.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home Site
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/OpenCore-Desktop-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  OpenCore Install Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/Getting-Started-With-ACPI/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Getting Started With ACPI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/GPU-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GPU Buyers Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/Wireless-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Wireless Buyers Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dortania.github.io/Anti-Hackintosh-Buyers-Guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Anti Buyers Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <div class="nav-item"><a role="button" aria-label="Switch to light mode" class="nav-link"><span>Switch theme</span></a></div> <a href="https://github.com/dortania/OpenCore-Post-Install" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Introduction</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/" aria-current="page" class="sidebar-link">OpenCore Post-Install</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Universal</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/universal/security.html" class="sidebar-link">Security and FileVault</a></li><li><a href="/OpenCore-Post-Install/universal/audio.html" aria-current="page" class="active sidebar-link">Fixing Audio</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/OpenCore-Post-Install/universal/audio.html#finding-your-layout-id" class="sidebar-link">Finding your layout ID</a></li><li class="sidebar-sub-header"><a href="/OpenCore-Post-Install/universal/audio.html#testing-your-layout" class="sidebar-link">Testing your layout</a></li><li class="sidebar-sub-header"><a href="/OpenCore-Post-Install/universal/audio.html#making-layout-id-more-permanent" class="sidebar-link">Making Layout ID more permanent</a></li><li class="sidebar-sub-header"><a href="/OpenCore-Post-Install/universal/audio.html#miscellaneous-issues" class="sidebar-link">Miscellaneous issues</a></li><li class="sidebar-sub-header"><a href="/OpenCore-Post-Install/universal/audio.html#troubleshooting" class="sidebar-link">Troubleshooting</a></li></ul></li><li><a href="/OpenCore-Post-Install/universal/oc2hdd.html" class="sidebar-link">Booting without USB</a></li><li><a href="/OpenCore-Post-Install/universal/update.html" class="sidebar-link">Updating OpenCore, kexts and macOS</a></li><li><a href="/OpenCore-Post-Install/universal/drm.html" class="sidebar-link">Fixing DRM</a></li><li><a href="/OpenCore-Post-Install/universal/iservices.html" class="sidebar-link">Fixing iServices</a></li><li><a href="/OpenCore-Post-Install/universal/pm.html" class="sidebar-link">Fixing Power Management</a></li><li><a href="/OpenCore-Post-Install/universal/sleep.html" class="sidebar-link">Fixing Sleep</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>USB Fixes</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/usb/" class="sidebar-link">USB Mapping: Introduction</a></li><li><a href="/OpenCore-Post-Install/usb/system-preparation.html" class="sidebar-link">System Preparation</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>USB Mapping</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Miscellaneous Fixes</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Laptop Specifics</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/laptop-specific/battery.html" class="sidebar-link">Fixing Battery Read-outs</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Cosmetics</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/cosmetic/verbose.html" class="sidebar-link">Fixing Resolution and Verbose</a></li><li><a href="/OpenCore-Post-Install/cosmetic/gui.html" class="sidebar-link">Add GUI and Boot-chime</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Multiboot</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/multiboot/bootstrap.html" class="sidebar-link">Setting up Bootstrap.efi</a></li><li><a href="/OpenCore-Post-Install/multiboot/bootcamp.html" class="sidebar-link">Installing BootCamp</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Miscellaneous</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/OpenCore-Post-Install/misc/rtc.html" class="sidebar-link">Fixing RTC</a></li><li><a href="/OpenCore-Post-Install/misc/msr-lock.html" class="sidebar-link">Fixing CFG Lock</a></li><li><a href="/OpenCore-Post-Install/misc/nvram.html" class="sidebar-link">Emulated NVRAM</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-succinct-content content__default"><h1 id="fixing-audio-with-applealc"><a href="#fixing-audio-with-applealc" class="header-anchor">#</a> Fixing audio with AppleALC</h1> <ul><li>Supported version: 0.5.9</li></ul> <p><extoc></extoc></p> <p>So to start, we'll assume you already have Lilu and AppleALC installed, if you're unsure if it's been loaded correctly you can run the following in terminal(This will also check if AppleHDA is loaded, as without this AppleALC has nothing to patch):</p> <div class="language- extra-class"><pre class="language-text"><code>kextstat | grep -E &quot;AppleHDA|AppleALC|Lilu&quot;
</code></pre></div><p>If all 3 show up, you're good to go. And make sure VoodooHDA <strong>is not present</strong>. This will conflict with AppleALC otherwise.</p> <p>If you're having issues, see the <a href="/OpenCore-Post-Install/universal/audio.html#troubleshooting">Troubleshooting section</a></p> <h2 id="finding-your-layout-id"><a href="#finding-your-layout-id" class="header-anchor">#</a> Finding your layout ID</h2> <p>So for this example, we'll assume your codec is ALC1220. To verify yours, you have a couple options:</p> <ul><li>Checking motherboard's spec page and manual</li> <li>Check Device Manager in Windows</li> <li>Run <code>cat</code> in terminal on Linux
<ul><li><code>cat /proc/asound/card0/codec#0 | less</code></li></ul></li></ul> <p>Now with a codec, we'll want to cross reference it with AppleALC's supported codec list:</p> <ul><li><a href="https://github.com/acidanthera/AppleALC/wiki/Supported-codecs" target="_blank" rel="noopener noreferrer">AppleALC Supported Codecs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>With the ALC1220, we get the following:</p> <div class="language- extra-class"><pre class="language-text"><code>0x100003, layout 1, 2, 3, 5, 7, 11, 13, 15, 16, 21, 27, 28, 29, 34
</code></pre></div><p>So from this it tells us 2 things:</p> <ul><li>Which hardware revision is supported(<code>0x100003</code>), only relevant when multiple revisions are listed with different layouts</li> <li>Various layout IDs supported by our codec(<code>layout 1, 2, 3, 5, 7, 11, 13, 15, 16, 21, 27, 28, 29, 34</code>)</li></ul> <p>Now with a list of supported layout IDs,  we're ready to try some out</p> <p><strong>Note</strong>: If your Audio Codec is ALC 3XXX this is likely false and just a rebranded controller, do your research and see what the actual controller is.</p> <ul><li>An example of this is the ALC3601, but when we load up Linux the real name is shown: ALC 671</li></ul> <h2 id="testing-your-layout"><a href="#testing-your-layout" class="header-anchor">#</a> Testing your layout</h2> <p>To test out our layout IDs, we're going to be using the boot-arg <code>alcid=xxx</code> where xxx is your layout. Remember that to try layout IDs <strong>one at a time</strong>. Do not add multiple IDs or alcid boot-args, if one doesn't work then try the next ID and etc</p> <div class="language- extra-class"><pre class="language-text"><code>config.plist
├── NVRAM
  ├── Add
    ├── 7C436110-AB2A-4BBB-A880-FE41995C9F82
          ├── boot-args | String | alcid=11
</code></pre></div><h2 id="making-layout-id-more-permanent"><a href="#making-layout-id-more-permanent" class="header-anchor">#</a> Making Layout ID more permanent</h2> <p>Once you've found a Layout ID that works with your hack, we can create a more permanent solution for closer to how real macs set their Layout ID.</p> <p>With AppleALC, there's a priority hierarchy with which properties are prioritized:</p> <ol><li><code>alcid=xxx</code> boot-arg, useful for debugging and overrides all other values</li> <li><code>alc-layout-id</code> in DeviceProperties, <strong>should only be used on Apple hardware</strong></li> <li><code>layout-id</code> in DeviceProperties, <strong>should be used on both Apple and non-Apple hardware</strong></li></ol> <p>To start, we'll need to find out where our Audio controller is located on the PCI map. For this, we'll be using a handy tool called <a href="https://github.com/acidanthera/gfxutil/releases" target="_blank" rel="noopener noreferrer">gfxutil<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> then with the macOS terminal:</p> <div class="language- extra-class"><pre class="language-text"><code>path/to/gfxutil -f HDEF
</code></pre></div><p><img src="/OpenCore-Post-Install/assets/img/gfxutil-hdef.c0e71f9a.png" alt=""></p> <p>Then add this PciRoot with the child <code>layout-id</code> to your config.plist under DeviceProperties -&gt; Add:</p> <p><img src="/OpenCore-Post-Install/assets/img/config-layout-id.54d8ccac.png" alt=""></p> <p>Note that AppleALC can accept both Decimal/Number and Hexadecimal/Data, generally the best method is Hex as you avoid any unnecessary conversions. You can use a simple <a href="https://www.rapidtables.com/convert/number/decimal-to-hex.html" target="_blank" rel="noopener noreferrer">decimal to hexadecimal calculator<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to find yours. <code>printf '%x\n' DECI_VAL</code>:</p> <p><img src="/OpenCore-Post-Install/assets/img/hex-convert.4e2df6d6.png" alt=""></p> <p>So in this example, <code>alcid=11</code> would become  either:</p> <ul><li><code>layout-id | Data | &lt;0B000000&gt;</code></li> <li><code>layout-id | Number | &lt;11&gt;</code></li></ul> <p>Note that the final HEX/Data value should be 4 bytes in total(ie. <code>0B 00 00 00</code> ), for layout IDs surpassing 255(<code>FF 00 00 00</code>) will need to remember that the bytes are swapped. So 256 will become <code>FF 01 00 00</code></p> <ul><li>HEX Swapping and data size can be completely ignored using the Decimal/Number method</li></ul> <p><strong>Reminder</strong>: You <strong>MUST</strong> remove the boot-arg afterwards, as it will always have the top priority and so AppleALC will ignore all other entries like in DeviceProperties</p> <h2 id="miscellaneous-issues"><a href="#miscellaneous-issues" class="header-anchor">#</a> Miscellaneous issues</h2> <p><strong>No Mic on AMD</strong>:</p> <ul><li>This is a common issue with when running AppleALC with AMD, specifically no patches have been made to support Mic input. At the moment the &quot;best&quot; solution is to either buy a USB DAC/Mic or go the VoodooHDA.kext method. Problem with VoodooHDA is that it's been known to be unstable and have worse audio quality than AppleALC</li></ul> <p><strong>Same layout ID from Clover doesn't work on OpenCore</strong>:</p> <p>This is likely do to IRQ conflicts, on Clover there's a whole sweep of ACPI hot-patches that are applied automagically. Fixing this is a little bit painful but <a href="https://github.com/corpnewt/SSDTTime" target="_blank" rel="noopener noreferrer">SSDTTime<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>'s <code>FixHPET</code> option can handle most cases.</p> <p>For odd cases where RTC and HPET take IRQs from other devices like USB and audio, you can reference the <a href="https://github.com/khronokernel/trashOS/blob/master/HP-Compaq-DC7900/README.md#dsdt-edits" target="_blank" rel="noopener noreferrer">HP Compaq DC7900 ACPI patch<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> example in the trashOS repo</p> <p><strong>Kernel Panic on power state changes in 10.15</strong>:</p> <ul><li>Enable PowerTimeoutKernelPanic in your config.plist:
<ul><li><code>Kernel -&gt; Quirks -&gt; PowerTimeoutKernelPanic -&gt; True</code></li></ul></li></ul> <p>Alternatively you can use <code>setpowerstate_panic=0</code> in boot-args, which is the equivalent of the above quirk.</p> <h2 id="troubleshooting"><a href="#troubleshooting" class="header-anchor">#</a> Troubleshooting</h2> <p>So for troubleshooting, we'll need to go over a couple things:</p> <ul><li><a href="#checking-if-you-have-the-right-kexts">Checking if you have the right kexts</a></li> <li><a href="#checking-if-applealc-is-patching-correctly">Checking if AppleALC is patching correctly</a></li> <li><a href="#checking-applehda-is-vanilla">Checking AppleHDA is vanilla</a></li> <li><a href="#applealc-working-inconsistently">AppleALC working inconsistently</a></li></ul> <h4 id="checking-if-you-have-the-right-kexts"><a href="#checking-if-you-have-the-right-kexts" class="header-anchor">#</a> Checking if you have the right kexts</h4> <p>To start, we'll assume you already have Lilu and AppleALC installed, if you're unsure if it's been loaded correctly you can run the following in terminal(This will also check if AppleHDA is loaded, as without this AppleALC has nothing to patch):</p> <div class="language- extra-class"><pre class="language-text"><code>kextstat | grep -E &quot;AppleHDA|AppleALC|Lilu&quot;
</code></pre></div><p>If all 3 show up, you're good to go. And make sure VoodooHDA <strong>is not present</strong>. This will conflict with AppleALC otherwise. Other kexts to make sure you do not have in your system:</p> <ul><li>realtekALC.kext</li> <li>CloverALC.kext</li> <li>VoodooHDA.kext</li> <li>HDA Blocker.kext</li> <li>HDAEnabler#.kext(# can be 1, 2, or 3)</li></ul> <blockquote><p>Hey Lilu and/or AppleALC aren't showing up</p></blockquote> <p>Generally the best place to start is by looking through your OpenCore logs and seeing if Lilu and AppleALC injected correctly:</p> <div class="language- extra-class"><pre class="language-text"><code>14:354 00:020 OC: Prelink injection Lilu.kext () - Success
14:367 00:012 OC: Prelink injection AppleALC.kext () - Success
</code></pre></div><p>If it says failed to inject:</p> <div class="language- extra-class"><pre class="language-text"><code>15:448 00:007 OC: Prelink injection AppleALC.kext () - Invalid Parameter
</code></pre></div><p>Main places you can check as to why:</p> <ul><li><strong>Injection order</strong>: Make sure that Lilu is above AppleALC in kext order</li> <li><strong>All kexts are latest release</strong>: Especially important for Lilu plugins, as mismatched kexts can cause issues</li></ul> <p>Note: To setup file logging, see <a href="https://dortania.github.io/OpenCore-Desktop-Guide/troubleshooting/debug.html" target="_blank" rel="noopener noreferrer">OpenCore Debugging<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h4 id="checking-if-applealc-is-patching-correctly"><a href="#checking-if-applealc-is-patching-correctly" class="header-anchor">#</a> Checking if AppleALC is patching correctly</h4> <p>So with AppleALC, one of the most easiest things to check if the patching was done right was to see if your audio controller was renamed correctly. Grab <a href="https://github.com/khronokernel/IORegistryClone/blob/master/ioreg-302.zip" target="_blank" rel="noopener noreferrer">IORegistryExplorer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and see if you have an HDEF device:</p> <p><img src="/OpenCore-Post-Install/assets/img/hdef.0b4a3bf3.png" alt=""></p> <p>As you can see from the above image, we have the following:</p> <ul><li>HDEF Device meaning our rename did the job</li> <li>AppleHDAController attached meaning Apple's audio kext attached successfully</li> <li><code>alc-layout-id</code> is a property showing our boot-arg/DeviceProperty injection was successful
<ul><li>Note: <code>layout-id | Data | 07000000</code> is the default layout, and <code>alc-layout-id</code> will override it and be the layout AppleHDA will use</li></ul></li></ul> <p>Note: <strong>Do not rename your audio controller manually</strong>, this can cause issues as AppleALC is trying to patch already. Let AppleALC do it's work.</p> <p><strong>More examples</strong>:</p> <table><thead><tr><th style="text-align:center;">Correct layout-id</th> <th style="text-align:center;">Incorrect layout-id</th></tr></thead> <tbody><tr><td style="text-align:center;"><img src="/OpenCore-Post-Install/assets/img/right-layout.b17911f6.png" alt=""></td> <td style="text-align:center;"><img src="/OpenCore-Post-Install/assets/img/wrong-layout.b0fe7803.png" alt=""></td></tr></tbody></table> <p>As you can see from the above 2, the right image is missing a lot of AppleHDAInput devices, meaning that AppleALC can't match up your physical ports to something it can understand and output to. This means you've got some work to find the right layout ID for your system.</p> <h4 id="checking-applehda-is-vanilla"><a href="#checking-applehda-is-vanilla" class="header-anchor">#</a> Checking AppleHDA is vanilla</h4> <p>This section is mainly relevant for those who were replacing the stock AppleHDA with a custom one, this is going to verify whether or not yours is genuine:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo kextcache -i / &amp;&amp; sudo kextcache -u /
</code></pre></div><p>This will check if the signature is valid for AppleHDA, if it's not then you're going to need to either get an original copy of AppleHDA for your system and replace it or update macOS(kexts will be cleaned out on updates). This will only happen when you're manually patched AppleHDA so if this is a fresh install it's highly unlikely you will have signature issues.</p> <h4 id="applealc-working-inconsistently"><a href="#applealc-working-inconsistently" class="header-anchor">#</a> AppleALC working inconsistently</h4> <p>Sometimes race conditions can occur where your hardware isn't initialized in time for AppleHDAController resulting in no sound output. To get around this, you can either:</p> <p>Specify in boot-args the delay:</p> <div class="language- extra-class"><pre class="language-text"><code>alcdelay=1000
</code></pre></div><p>Or Specify via DeviceProperties(in your HDEF device):</p> <div class="language- extra-class"><pre class="language-text"><code>alc-delay | Number | 1000
</code></pre></div><p>The above boot-arg/property will delay AppleHDAController by 1000 ms(1 second), note the ALC delay cannot exceed <a href="https://github.com/acidanthera/AppleALC/blob/master/AppleALC/kern_alc.cpp#L308L311" target="_blank" rel="noopener noreferrer">3000 ms<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/15/2020, 11:49:12 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ⟵
      <a href="/OpenCore-Post-Install/universal/security.html" class="prev">
        Security and FileVault
      </a></span> <span class="next"><a href="/OpenCore-Post-Install/universal/oc2hdd.html">
        Booting without USB
      </a>
      ⟶
    </span></p></div> </main></div><div class="global-ui"><div style="visibility:hidden;display:none;"></div><!----></div></div>
    <script src="/OpenCore-Post-Install/assets/js/app.a3a75018.js" defer></script><script src="/OpenCore-Post-Install/assets/js/2.a6c1b66e.js" defer></script><script src="/OpenCore-Post-Install/assets/js/6.75f5f74d.js" defer></script><script src="/OpenCore-Post-Install/assets/js/28.32d25b57.js" defer></script>
  </body>
</html>
